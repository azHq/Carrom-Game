!function(){var n={API_PATH_EVENT:"/v1/event",API_PATH_ERROR:"/v1/error",LAUNCH_IDS:["1","126","175","cz6lgVjltTAB6DWhkj4ngQ","255","aa5lUEU5rDYdl3nXS_kp9g","2"]},t=function(n){return"string"==typeof n&&!!n.match(/(?:\?|&(?:amp;)?)scsonar=1(?:$|&)/)},r=function(n){for(var r=n.getElementsByTagName("a"),e=0,o=r.length;e<o;e++)if(t(r[e].getAttribute("href")))return!0;return!1},e=function(n,t,r){var e=window.XMLHttpRequest;if(!e)return!1;var o=new e;o.open("POST",n,!0),o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&r&&r()},o.send(JSON.stringify(t))},o=function(n){var t=[];for(var r in n)n.hasOwnProperty(r)&&t.push(r+"="+encodeURIComponent(n[r]));return t.join("&")},a=function(n,t){var r=document.createElement("img");return r.width=1,r.height=1,r.onload=r.onerror=function(){r.onload=null,r.onerror=null,t&&t()},r.src=n,r},i=function(n,t,r){var e=[n,"?",o(t)].join("");a(e,r)},c=function(n){var t=(n=n||{}).url,r=n.imgSend||i,o=n.xhrSend||e;if(!t)throw"Dispatch requires URL";return{send:function(n,e,a){if(!n)throw"enp";var i=0;for(var c in n)i+=n.hasOwnProperty(c)?1:0;if(0===i)throw"eep";"xhr"===a?o.call(null,t,n,e):r.call(null,t,n,e)}}},u=function(n){for(var t=0,r=n.length-1;r>=0;r--){var e=n.charCodeAt(r);t=0!==(e=266338304&(t=(t<<6&268435455)+e+(e<<14)))?t^e>>21:t}return t},s=function(){if(!(arguments.length<1)){for(var n=arguments[0],t=1;t<arguments.length;t++){var r=arguments[t];for(var e in r)r.hasOwnProperty(e)&&(n[e]=r[e])}return n}},f=function(){return Math.round(1*new Date/1e3)},h=function(n){return"https://api.stack-sonar.com"+n},l=function(n,t){var r={userAgent:n.navigator.userAgent,url:n.location.href};return{report:function(n){var e=s({},r,{message:n.toString(),stackTrace:n.stack||""});t.send(e,null,"xhr")}}},d=function(){var n,t=window.navigator.plugins;if(t&&t.length)for(var r=0;r<t.length&&!n;r++)t[r].name.indexOf("Shockwave Flash")>-1&&(n=t[r].description);var e;if(!n)try{n=(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")).GetVariable("$version")}catch(a){}if(!n)try{n="WIN 6,0,21,0",(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6")).AllowScriptAccess="always",n=e.GetVariable("$version")}catch(a){}if(!n)try{n=(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(a){}if(n){var o=n.match(/[\d]+/g);o.length>=3&&(n=[o[0],".",o[1]," r",o[2]].join(""))}return n},v=function(){return"function"==typeof window.navigator.javaEnabled&&window.navigator.javaEnabled()},w=function(){var n=window.navigator;return n.doNotTrack?n.doNotTrack:n.msDoNotTrack?n.msDoNotTrack:window.doNotTrack?window.doNotTrack:"unknown"},g=function(){var n=window.navigator;return n.languages&&n.languages.length?n.languages.slice().sort().join("."):n.language||n.browserLanguage||undefined},p=function(){return[window.screen.width,window.screen.height,window.screen.colorDepth].join("x")},y=function(){var n=window.navigator.plugins,t=[];if(n&&n.length)for(var r=0;r<n.length;r++)t.push(n[r].description||n[r].name);return t.sort(),t.join(".")||undefined},m=function(){for(var n=[window.navigator.userAgent,window.navigator.platform,g(),p(),(new Date).getTimezoneOffset(),d(),v(),y(),w()],t=[],r=0,e=n.length;r<e;r++)"undefined"!=typeof n[r]&&t.push(n[r]);return u(t.join("."))},k=function(n,t){var r=[],e=!1,o=!1,a=function(){if(!e){e=!0;for(var n=0;n<r.length;n++)r[n]();r=[]}},i=function(){"complete"===t.readyState&&a()},c=function(){t.addEventListener?(t.addEventListener("DOMContentLoaded",a,!1),n.addEventListener("load",a,!1)):(t.attachEvent("onreadystatechange",i),n.attachEvent("onload",a))};return function(i){e?n.setTimeout(i,1):(r.push(i),"complete"===t.readyState||"loading"!==t.readyState&&!t.documentElement.doScroll?n.setTimeout(a,1):o||(c(),o=!0))}},S=/^[A-Za-z_][\w.-]*$/,A=function(n){return void 0===n?"":n instanceof Array?n.map(A).join(","):"object"==typeof n?"":n},_=function(n){if("object"!=typeof n||!n)return{};var t={};for(var r in n)n.hasOwnProperty(r)&&r.match(S)&&(t[r]=A(n[r]));return t},T=function(n){this.connector=n.connector,this.accountId=n.accountId,this.url=n.url,this.referrer=n.referrer,this.fingerprint=n.fingerprint,this.scsonar=n.scsonar,this.dispatch=n.dispatch};T.prototype.collect=function(n,t,r){if(!this.connector)throw"enc";if(n&&t&&"string"==typeof n&&"string"==typeof t){var e={_c:this.connector,_a:this.accountId,_f:this.fingerprint,_u:this.url,_r:this.referrer,_x:this.scsonar?1:0,_t:f(),_s:n,_e:t},o=_(r),a=s({},o,e);this.dispatch.send(a)}};var j,E,O,N,P=window.stackSonar.q,b=window.stackSonar.l,D=function(t){t+="";for(var r=n.LAUNCH_IDS,e=0,o=r.length;e<o;e++)if(t===r[e])return!0;return!1},I=function(n){return!!n&&("stack-connect"===n[0]||"stack-connect-wp"===n[0])},R=function(n,t,e,o){return new T({connector:e,accountId:o,url:n.location.href,referrer:t.referrer,fingerprint:m(),scsonar:r(t),dispatch:j})},L=function(n){for(var t=0;t<P.length;t++)n.collect.apply(n,P[t])},H=function(n){return function(){try{n.collect.apply(n,arguments)}catch(t){O.report(t)}}},F=function(n,t){try{var r,e,o=P.shift();if(!I(o))return;if(r=o[0],e=o[1],!D(e))return;var a=R(n,t,r,e);n.stackSonar=H(a),a.collect("send","session-start",{ts:b}),L(a)}catch(i){O.report(i)}};!function(){j=c({url:h(n.API_PATH_EVENT)}),E=c({url:h(n.API_PATH_ERROR)}),O=l(window,E),N=k(window,document);try{N(function(){F(window,document)})}catch(t){O.report(t)}}()}();
